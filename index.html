<!DOCTYPE html><html lang="en">
<head>
<meta charset="UTF-8" />
<title>Valentine Bubble Shooter</title>
<style>
body{
  margin:0;
  font-family:'Comic Sans MS',cursive;
  background:linear-gradient(#ff9bb3,#ff4d6d);
  overflow:hidden;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}.background-hearts span{ position:absolute; color:rgba(255,255,255,0.25); animation:float 9s infinite ease-in-out; }

@keyframes float{ 0%{transform:translateY(100vh) scale(.6);opacity:0} 50%{opacity:.5} 100%{transform:translateY(-10vh) scale(1.2);opacity:0} }

canvas{background:transparent}

.menu{position:absolute;text-align:center}

button{ background:#ff2f68; border:none; color:white; padding:14px 28px; font-size:18px; border-radius:30px; cursor:pointer; margin:8px; box-shadow:0 4px 10px rgba(0,0,0,.3) }

button:hover{transform:scale(1.05)}

.message{ font-size:28px; color:#b3003c; background:rgba(255,255,255,.96); padding:25px 35px; border-radius:22px; margin-bottom:15px; animation:pop .7s ease }

@keyframes pop{0%{transform:scale(.6)}100%{transform:scale(1)}} </style>

</head>
<body><div class="background-hearts"></div><div class="menu" id="startMenu">
  <button onclick="startGame()">ğŸ’˜ start game ğŸ’˜</button>
</div><canvas id="game" width="360" height="540" style="display:none"></canvas>

<div class="menu" id="endMenu" style="display:none">
  <div class="message">ğŸ’– Will you be my Valentine Sweetiepie? ğŸ’–</div>
  <button onclick="celebrate()">Yes ğŸ’–</button>
  <button onclick="celebrate()">Yes ğŸ’</button>
</div><script>
const canvas=document.getElementById('game');
const ctx=canvas.getContext('2d');

const bubbles=['â¤ï¸','ğŸ«','ğŸŒ¹','ğŸ§¸'];
const rows=3,cols=3,radius=18;
let grid=[],particles=[];
let playing=false,pulse=0;

let shooter={x:canvas.width/2,y:canvas.height-50,bubble:rand(),dx:0,dy:0,moving:false};

function rand(){return bubbles[Math.floor(Math.random()*bubbles.length)]}

function initGrid(){
  grid=[];
  const s=42;
  for(let r=0;r<rows;r++){
    for(let c=0;c<cols;c++){
      const x=canvas.width/2+(c-(cols-1)/2)*s;
      const y=170+r*s;
      grid.push({x,y,bubble:rand(),active:true})
    }
  }
}

function drawHeartBox(){
  pulse+=0.04;
  const p=Math.sin(pulse)*4;

  ctx.lineWidth=12+p/2;
  ctx.strokeStyle='#ff003c';
  ctx.beginPath();
  ctx.moveTo(180,190);
  ctx.bezierCurveTo(70,40,-50,190,180,460);
  ctx.bezierCurveTo(410,190,290,40,180,190);
  ctx.stroke();

  ctx.fillStyle='rgba(255,255,255,0.88)';
  ctx.beginPath();
  ctx.moveTo(180,190);
  ctx.bezierCurveTo(90,80,20,190,180,430);
  ctx.bezierCurveTo(340,190,270,80,180,190);
  ctx.fill();
}

function drawGrid(){
  grid.forEach(b=>{
    if(!b.active)return;
    ctx.beginPath();
    ctx.arc(b.x,b.y,radius,0,Math.PI*2);
    ctx.fillStyle='#fff';
    ctx.fill();
    ctx.font='18px serif';
    ctx.textAlign='center';
    ctx.textBaseline='middle';
    ctx.fillText(b.bubble,b.x,b.y+1);
  })
}

function drawShooter(){
  ctx.font='26px serif';
  ctx.textAlign='center';
  ctx.fillText('ğŸ¹',shooter.x,shooter.y+8);
  ctx.beginPath();
  ctx.arc(shooter.x,shooter.y-24,radius,0,Math.PI*2);
  ctx.fillStyle='#fff';
  ctx.fill();
  ctx.font='18px serif';
  ctx.fillText(shooter.bubble,shooter.x,shooter.y-24);
}

function flood(start){
  const stack=[start],match=[start];
  start.v=true;
  while(stack.length){
    const b=stack.pop();
    grid.forEach(n=>{
      if(!n.active||n.v||n.bubble!==start.bubble)return;
      if(Math.hypot(n.x-b.x,n.y-b.y)<radius*2.3){n.v=true;stack.push(n);match.push(n)}
    })
  }
  grid.forEach(b=>b.v=false);
  return match;
}

function explode(x,y){for(let i=0;i<16;i++)particles.push({x,y,dx:(Math.random()-.5)*5,dy:(Math.random()-.5)*5,l:35})}

function drawParticles(){particles.forEach(p=>{ctx.fillStyle='rgba(255,77,109,.85)';ctx.beginPath();ctx.arc(p.x,p.y,4,0,Math.PI*2);ctx.fill();p.x+=p.dx;p.y+=p.dy;p.l--});particles=particles.filter(p=>p.l>0)}

function updateShooter(){
  if(!shooter.moving)return;
  shooter.x+=shooter.dx;
  shooter.y+=shooter.dy;

  if(shooter.x<30||shooter.x>canvas.width-30) shooter.dx*=-1;

  grid.forEach(b=>{
    if(!b.active)return;
    if(Math.hypot(b.x-shooter.x,b.y-shooter.y)<radius*2){
      shooter.moving=false;
      const placed={x:b.x,y:b.y+42,bubble:shooter.bubble,active:true};
      grid.push(placed);
      const m=flood(placed);
      if(m.length>=3){m.forEach(x=>{x.active=false;explode(x.x,x.y)})}
      resetShooter();
      checkWin();
    }
  })

  if(shooter.y<120){shooter.moving=false;resetShooter()}
}

function resetShooter(){shooter.x=canvas.width/2;shooter.y=canvas.height-50;shooter.bubble=rand()}

function checkWin(){
  if(grid.every(b=>!b.active)){
    playing=false;
    canvas.style.display='none';
    document.getElementById('endMenu').style.display='block';
  }
}

canvas.addEventListener('click',e=>{
  if(!playing||shooter.moving)return;
  const r=canvas.getBoundingClientRect();
  const x=e.clientX-r.left,y=e.clientY-r.top;
  const a=Math.atan2(y-shooter.y,x-shooter.x);
  shooter.dx=Math.cos(a)*7;shooter.dy=Math.sin(a)*7;shooter.moving=true
})

function loop(){
  if(!playing)return;
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawHeartBox();
  drawGrid();
  drawShooter();
  updateShooter();
  drawParticles();
  requestAnimationFrame(loop);
}

function startGame(){
  document.getElementById('startMenu').style.display='none';
  document.getElementById('endMenu').style.display='none';
  canvas.style.display='block';
  initGrid();
  playing=true;
  loop();
}

function celebrate(){
  document.getElementById('endMenu').innerHTML='<div class = "message" > Slayyy, love youu!!ğŸ˜˜</div>'
}

function spawnHearts(){
  const c=document.querySelector('.background-hearts');
  for(let i=0;i<30;i++){
    const h=document.createElement('span');
    h.textContent='â¤';
    h.style.left=Math.random()*100+'%';
    h.style.animationDelay=Math.random()*9+'s';
    h.style.fontSize=10+Math.random()*18+'px';
    c.appendChild(h)
  }
}

spawnHearts();
</script></body>
</html>
